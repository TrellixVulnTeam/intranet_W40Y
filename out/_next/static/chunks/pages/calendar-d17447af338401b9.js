(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{6431:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/calendar",function(){return n(7405)}])},7405:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var s=n(5893),a=n(8277),r=n.n(a),i=n(7294),l=n(1163),c=n.n(l),u=n(6827),o=n(381),d=n.n(o),h=(n(4470),n(121),n(765)),f=n(1664),x=n.n(f),j=["LUNDI","MARDI","MERCREDI","JEUDI","VENDREDI","SAMEDI","DIMANCHE"];function m(e){var t=e.selectStrass,n=e.authStrass,a=e.mounted,l=e.setMounted,c=(0,i.useState)([]),u=c[0],o=c[1],d=(0,i.useState)(!1),f=d[0],m=d[1];(0,i.useEffect)((function(){f&&setTimeout((function(){alert("Horaire supprim\xe9e !"),m(!1)}),100)}),[f]),(0,i.useEffect)((function(){a||(0,h.Z)("/calendar/UAI").then((function(e){o(e),l(!0)}))}),[a]);return(0,s.jsxs)("div",{className:r().global,children:[(0,s.jsx)("h1",{children:"Calendrier de l'UAI"}),n.includes(t.cn)?(0,s.jsx)(x(),{href:"/calendar?action=new",passHref:!0,children:(0,s.jsx)("h4",{className:"boutonAjout",children:"Ajouter un Horaire"})}):void 0,(0,s.jsx)("div",{className:r().grid,children:j.map((function(e){return(0,s.jsxs)("section",{className:r().section,children:[(0,s.jsx)("div",{className:r().header,children:(0,s.jsx)("h4",{className:r().title,children:e})}),u.map((function(a,i){return a.jour==e?(0,s.jsxs)("div",{className:r().sport,children:[(0,s.jsxs)("h4",{className:r().texte,children:[a.title," - ",a.hours]}),(0,s.jsx)("p",{className:r().texte,children:a.infos}),n.includes(t.cn)?(0,s.jsx)("button",{onClick:function(){return e=a.id,void(0,h.W)("/calendar","DELETE",{id:e}).then((function(e){200==e&&(m(!0),l(!1))}));var e},children:(0,s.jsx)("h4",{className:"boutonEdit",children:"Supprimer"})}):void 0]},i):void 0}))]},e)}))})]})}function p(e){var t=e.setMounted,n=(0,i.useState)(),a=n[0],l=n[1],u=(0,i.useState)("LUNDI"),o=u[0],d=u[1],f=(0,i.useState)(),x=f[0],m=f[1],p=(0,i.useState)(),_=p[0],N=p[1],v=(0,i.useState)(!1),S=v[0],C=v[1];(0,i.useEffect)((function(){S&&setTimeout((function(){alert("Horaire Ajout\xe9e !"),C(!1)}),100)}),[S]);return(0,s.jsxs)("div",{className:r().global,children:[(0,s.jsx)("h3",{children:"Ajouter un Horaire"}),(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(0,h.W)("/calendar","POST",{title:a,jour:o,hours:x,infos:_}).then((function(e){200==e&&(c().push("/calendar"),C(!0),t(!1))}))},children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"texte",children:"Sport"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return l(e.target.value)},className:"field",placeholder:"Pitate",required:!0})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"texte",children:"S\xe9lection du jour"}),(0,s.jsx)("select",{className:r().selection,onChange:function(e){return d(e.target.value)},children:j.map((function(e){return(0,s.jsx)("option",{value:e,children:e},e)}))})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"texte",children:"Horaires"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return m(e.target.value)},className:"field",placeholder:"18h - 20h",required:!0})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"texte",children:"Infos Suppl\xe9mentaires"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return N(e.target.value)},className:"field",placeholder:"Gymnase / Zident / ..."})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:"submit",children:"Ajouter"})})]})]})}var _=(0,u.Zt)(d());function N(e){var t=e.selectStrass,n=(0,i.useState)(!1),a=n[0],l=n[1],o=(0,i.useState)([]),d=o[0],f=o[1];(0,i.useEffect)((function(){(0,h.Z)("/calendar").then((function(e){var t=[];e.map((function(e,n){t.push({id:n,title:e.summary,start:new Date(e.start.dateTime),end:new Date(e.end.dateTime)})})),f(t)}))}),[]);var x=["AE","UAI"];return x.includes(t.cn)&&"new"==c().query.action?(0,s.jsx)(p,{setMounted:l}):(0,s.jsxs)("div",{className:r().global,children:[(0,s.jsx)("h1",{children:"Calendrier"}),(0,s.jsx)(u.f,{localizer:_,events:d,startAccessor:"start",endAccessor:"end",defaultView:"week",min:new Date(1972,0,1,7,0,0)}),(0,s.jsx)(m,{selectStrass:t,authStrass:x,mounted:a,setMounted:l})]})}},8277:function(e){e.exports={global:"Calendar_global__pfGQf",grid:"Calendar_grid__kxSfI",section:"Calendar_section__l5Bzv",header:"Calendar_header__tCYho",title:"Calendar_title__Kn017",selection:"Calendar_selection__FaJoX",sport:"Calendar_sport__duh0T",texte:"Calendar_texte__DIBHC"}}},function(e){e.O(0,[770,885,70,774,888,179],(function(){return t=6431,e(e.s=t);var t}));var t=e.O();_N_E=t}]);