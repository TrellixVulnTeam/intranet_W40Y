(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{6431:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/calendar",function(){return n(7405)}])},7405:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var s=n(5893),a=n(8277),r=n.n(a),l=n(7294),i=n(1163),c=n.n(i),u=n(6827),o=n(381),d=n.n(o),h=(n(4470),n(121),n(765)),f=n(1664),x=n.n(f),j=["LUNDI","MARDI","MERCREDI","JEUDI","VENDREDI","SAMEDI","DIMANCHE"];function m(e){var t=e.selectStrass,n=e.authStrass,a=e.mounted,i=e.setMounted,c=e.toggleCalendar,u=e.setToggleCalendar,o=(0,l.useState)([]),d=o[0],f=o[1],m=(0,l.useState)(!1),p=m[0],_=m[1];(0,l.useEffect)((function(){p&&setTimeout((function(){alert("Horaire supprim\xe9e !"),_(!1)}),100)}),[p]),(0,l.useEffect)((function(){a||(0,h.Z)("/calendar/UAI").then((function(e){f(e),i(!0)}))}),[a]);return(0,s.jsxs)("div",{className:r().global,children:[(0,s.jsx)("h1",{children:"Calendrier de l'UAI"}),(0,s.jsx)("button",{onClick:function(){return u(!c)},children:(0,s.jsx)("h4",{className:"boutonAjout",children:"Voir le Calendrier Boquette"})}),n.includes(t.cn)?(0,s.jsx)(x(),{href:"/calendar?action=new",passHref:!0,children:(0,s.jsx)("h4",{className:"boutonAjout",children:"Ajouter un Horaire"})}):void 0,(0,s.jsx)("div",{className:r().grid,children:j.map((function(e){return(0,s.jsxs)("section",{className:r().section,children:[(0,s.jsx)("div",{className:r().header,children:(0,s.jsx)("h4",{className:r().title,children:e})}),d.map((function(a,l){return a.jour==e?(0,s.jsxs)("div",{className:r().sport,children:[(0,s.jsxs)("h4",{className:r().texte,children:[a.title," - ",a.hours]}),(0,s.jsx)("p",{className:r().texte,children:a.infos}),n.includes(t.cn)?(0,s.jsx)("button",{onClick:function(){return e=a.id,void(0,h.W)("/calendar","DELETE",{id:e}).then((function(e){200==e&&(_(!0),i(!1))}));var e},children:(0,s.jsx)("h4",{className:"boutonEdit",children:"Supprimer"})}):void 0]},l):void 0}))]},e)}))})]})}function p(e){var t=e.setMounted,n=(0,l.useState)(),a=n[0],i=n[1],u=(0,l.useState)("LUNDI"),o=u[0],d=u[1],f=(0,l.useState)(),x=f[0],m=f[1],p=(0,l.useState)(),_=p[0],N=p[1],v=(0,l.useState)(!1),C=v[0],g=v[1];(0,l.useEffect)((function(){C&&setTimeout((function(){alert("Horaire Ajout\xe9e !"),g(!1)}),100)}),[C]);return(0,s.jsxs)("div",{className:r().global,children:[(0,s.jsx)("h3",{children:"Ajouter un Horaire"}),(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(0,h.W)("/calendar","POST",{title:a,jour:o,hours:x,infos:_}).then((function(e){200==e&&(c().push("/calendar"),g(!0),t(!1))}))},children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"texte",children:"Sport"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return i(e.target.value)},className:"field",placeholder:"Pitate",required:!0})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"texte",children:"S\xe9lection du jour"}),(0,s.jsx)("select",{className:r().selection,onChange:function(e){return d(e.target.value)},children:j.map((function(e){return(0,s.jsx)("option",{value:e,children:e},e)}))})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"texte",children:"Horaires"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return m(e.target.value)},className:"field",placeholder:"18h - 20h",required:!0})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("p",{className:"texte",children:"Infos Suppl\xe9mentaires"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return N(e.target.value)},className:"field",placeholder:"Gymnase / Zident / ..."})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:"submit",children:"Ajouter"})})]})]})}var _=(0,u.Zt)(d());function N(e){var t=e.selectStrass,n=(0,l.useState)(!1),a=n[0],i=n[1],o=(0,l.useState)(!1),d=o[0],f=o[1],x=(0,l.useState)([]),j=x[0],N=x[1];(0,l.useEffect)((function(){(0,h.Z)("/calendar").then((function(e){var t=[];e.map((function(e,n){t.push({id:n,title:e.summary,start:new Date(e.start.dateTime),end:new Date(e.end.dateTime)})})),N(t)}))}),[]);var v=["AE","UAI"];return d?v.includes(t.cn)&&"new"==c().query.action?(0,s.jsx)(p,{setMounted:i}):(0,s.jsx)(m,{selectStrass:t,authStrass:v,mounted:a,setMounted:i,toggleCalendar:d,setToggleCalendar:f}):(0,s.jsxs)("div",{className:r().global,children:[(0,s.jsx)("h1",{children:"Calendrier"}),(0,s.jsx)("button",{onClick:function(){return f(!d)},children:(0,s.jsx)("h4",{className:"boutonAjout",children:"Voir le Calendrier de l'UAI"})}),(0,s.jsx)(u.f,{localizer:_,events:j,startAccessor:"start",endAccessor:"end",defaultView:"week",min:new Date(1972,0,1,7,0,0)})]})}},8277:function(e){e.exports={global:"Calendar_global__pfGQf",grid:"Calendar_grid__kxSfI",section:"Calendar_section__l5Bzv",header:"Calendar_header__tCYho",title:"Calendar_title__Kn017",selection:"Calendar_selection__FaJoX",sport:"Calendar_sport__duh0T",texte:"Calendar_texte__DIBHC"}}},function(e){e.O(0,[770,885,70,774,888,179],(function(){return t=6431,e(e.s=t);var t}));var t=e.O();_N_E=t}]);